name: Branch
on:
  pull_request:
    branches:
      - main
      - release/**
    types: [opened, synchronize, reopened]
  push:
    branches:
      - main
      - release/v*
    paths-ignore:
      - ".github/**"
      - "docs/**"
      - "examples/**"
      - "test/**"
      - "README.md"

permissions:
  contents: write
  actions: write
  # Allow test PR comments to be deleted
  issues: write
  pull-requests: write

jobs:
  github-action:
    uses: cloudposse-github-actions/.github/.github/workflows/ci.yml@fix/ci-permissions #TODO: revert to main
    secrets: inherit
